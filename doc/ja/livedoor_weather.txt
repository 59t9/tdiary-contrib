! 概要
[[Weather Hacks - livedoor 天気情報|http://weather.livedoor.com/weather_hacks/]]を利用して日記に天気情報を埋め込むプラグイン

!使い方
インストールしたら、設定画面で天気情報を取得する都市IDを設定してください。日記更新時に天気情報を取得します。
デフォルトでは日記の一日単位上部に天気情報を埋め込みます。

!!CSS
 div.lwws {
	  text-align: right;
	  font-size: 0.8em;
 }
上記のように設定すると見やすくなります。

!!キャッシュファイル
天気情報はxml形式で
 @cache_path/lwws/YYYYMMDD.xml
というファイルに保存しています。

!!プラグイン呼び出し
!!!lwws_today
今日の天気を表示します。
!!!lwws_tomorrow
明日の天気を表示します。
!!!lwws_dayaftertomorrow
明後日の天気を表示します。

!!!使い方
例えば(Wikiスタイルの例)
 ||今日||明日||明後日
 ||{{lwws_today}}||{{lwws_tomorrow}}||{{lwws_dayaftertomorrow}}
と書くと三日分の天気が表で表示されます。
サイドバーなどに使うとかっこいいかもしれません。

!ToDo
*セキュア対応
*キャッシュの削除機能
*(他にあれば募集します)

!ライセンス
GPL2

!更新履歴
!!20070329
* open-uri の proxy を tdiary.conf から読み込むようにした

!!20070214
* feed 生成時の出力を抑制

!!20070206
* NKFを使うのをやめて @conf.to_native を使うようにした
* proxy の削除(trunk に追従)
* to_native の第二引数として utf-8 を指定

!!20070109
* サニタイズキャンペーンに伴う修正

!!20060712
* lwws_getのバグ修正

!!20060709
* 設定更新時には強制的にキャッシュを再取得するように変更

!!20060702
* lwws_getの処理を変更

!!20060310
* 設定が保存されない不具合の修正

!!20060309
* キャッシュの自動更新を設定可能にする
* 自動更新間隔を任意で設定可能にする
** 自動更新間隔を0にするとアクセスするたびにLWWSをたたくようになるので、適当に6-12くらいの数字を入れるのを推奨。

!!20060219
* 携帯閲覧時には画像を非表示
* 画像にtitle要素としてtelopエレメントを追加

!!20060213
* キャッシュファイルを6時間で更新するようにした。
* 任意の日付の天気を表示するlwwsメソッドを追加

!!20060212
* 新規メソッドとしてlwws_today,lwws_tomorrow,lwws_dayaftertomorrowを追加。プラグイン呼び出しとして、任意の場所に天気を表示します。
* 表示項目を変更機能の追加(設定画面)。
* アイコン表示機能の追加(設定画面)。
* 詳細へのリンクは天候に作成するようにした。(アイコンの場合はアイコンに設定)
* convert_dateメソッドを追加。date_statusからYYYYMMDD形式の文字列を返します。
* 英語リソースをでっちあげた。(中国語は英語リソースの焼きまわし)
* 「℃」を言語リソースに移動
* lwws_to_thmlメソッドで任意の日付を指定可能にした。


!!20060211
* lwws_getメソッドの引数をdateからdate_status(today,tomorrow,dayaftertomorrow)へと変更
* 設定画面の不要なエスケープを修正
* lwws_getメソッドでxmlを保存する時にYYYYMMDD形式になっていないバグを修正

!!20060210
* 最初のリリース
* Uconvではなく、NKFを使ってUTF-8を扱うようにした。
* typo(というか、コピペ修正ミス)を直した。
* 最高気温、最低気温が存在する場合には表示するようにした。
* livedoor天気情報へのリンクを作るようにした。
* proxyの情報はamazon.proxyに統合した。